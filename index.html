<!DOCTYPE html>
<html>
<head>
    <title>Genshin Impact Characters</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link href='https://fonts.googleapis.com/css?family=Signika' rel='stylesheet'>
    <style>


    </style>
</head>
<body>
<h1>Genshin Impact Characters</h1>
<div id="searchContainer">
    <input type="text" id="searchQuery" placeholder="Search by Name">
</div>
<div id="filterContainer" class="element-filter-container">
    <div class="element-filter-buttons">
        <button class="filter-button" data-element="Anemo"><img src="./Content/Images/Element_Anemo.png" alt="Anemo" class="element-image"></button>
        <button class="filter-button" data-element="Geo"><img src="./Content/Images/Element_Geo.png" alt="Geo" class="element-image"></button>
        <button class="filter-button" data-element="Electro"><img src="./Content/Images/Element_Electro.png" alt="Electro" class="element-image"></button>
        <button class="filter-button" data-element="Dendro"><img src="./Content/Images/Element_Dendro.png" alt="Dendro" class="element-image"></button>
        <button class="filter-button" data-element="Hydro"><img src="./Content/Images/Element_Hydro.png" alt="Hydro" class="element-image"></button>
        <button class="filter-button" data-element="Pyro"><img src="./Content/Images/Element_Pyro.png" alt="Pyro" class="element-image"></button>
    </div>
    <div class="remove-filter-container">
        <button class="filter-button remove-filter">Remove Filter</button>
    </div>
</div>
<div id="characterList">
    <!-- Character divs will be dynamically added here -->
</div>

<script>
    fetch('./Content/characters.json')
        .then(response => response.json())
        .then(data => {
            var characterList = document.getElementById('characterList');
            var charactersData = data;

            function displayCharacters(characters) {
                characterList.innerHTML = '';  // Clear the characterList div

                characters.forEach(function(character) {
                    var characterDiv = document.createElement('div');
                    characterDiv.classList.add ('character');

                    var characterImage = document.createElement('img');
                    characterImage.src = './Content/Images/' + character.ImageUri;
                    characterImage.alt = character.DisplayName;
                    characterImage.classList.add('character-image');

                    var characterInfo = document.createElement('div');
                    characterInfo.classList.add('character-info');

                    var characterName = document.createElement('h2');
                    characterName.textContent = character.DisplayName;

                    var characterDetails = document.createElement('div');
                    characterDetails.classList.add('character-details');

                    var characterElement = document.createElement('p');

                    var characterElementImage = document.createElement('img');
                    characterElementImage.src = './Content/Images/Element_' + character.Element + '.png';
                    characterElementImage.alt = character.Element;
                    characterElementImage.classList.add('element-icon');
                    characterElement.appendChild(characterElementImage);

                    var characterRarity = document.createElement('p');
                    characterRarity.textContent = character.Rarity + ' Stars';

                    var characterWeapon = document.createElement('p');
                    characterWeapon.textContent = 'Weapon: ' + character.Weapon;

                    var characterRegion = document.createElement('p');
                    characterRegion.textContent = 'Region: ' + character.Region.join(', ');

                    characterDetails.appendChild(characterElement);
                    characterDetails.appendChild(characterRarity);
                    characterDetails.appendChild(characterWeapon);  // Added weapon info
                    characterDetails.appendChild(characterRegion);  // Added region info

                    characterInfo.appendChild(characterName);
                    characterInfo.appendChild(characterDetails);

                    characterDiv.appendChild(characterImage);
                    characterDiv.appendChild(characterInfo);

                    characterList.appendChild(characterDiv);
                });
            }

            // Add event listener to the search input field for real-time filtering
            document.getElementById('searchQuery').addEventListener('input', function() {
                var searchQuery = document.getElementById('searchQuery').value.trim().toLowerCase();

                var filteredCharacters = charactersData.filter(function(character) {
                    return character.DisplayName.toLowerCase().includes(searchQuery);
                });

                displayCharacters(filteredCharacters);
            });

            // Add event listener to filter buttons
            var filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    var elementFilter = this.getAttribute('data-element');
                    if (elementFilter) {
                        var filteredCharacters = charactersData.filter(function(character) {
                            return character.Element === elementFilter;
                        });
                        displayCharacters(filteredCharacters);
                    } else {
                        // "Remove Filter" button clicked, so show all characters
                        displayCharacters(charactersData);
                        document.getElementById('searchQuery').value = ''; // Clear the search input
                    }
                });
            });

            // Display all characters initially
            displayCharacters(charactersData);
        })
        .catch(error => {
            console.error('Error loading JSON data:', error);
        });
</script>
</body>
</html>
